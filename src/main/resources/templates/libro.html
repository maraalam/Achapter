<!DOCTYPE html>
<html class="h-100" xmlns:th="http://www.thymeleaf.org">

<head>
    <th:block th:replace="fragments/head :: header" />
    <title>IW: Libro</title>
</head>

<body class="d-flex flex-column h-100">
    <header th:replace="fragments/nav.html :: nav"></header>
    
    <main class="flex-shrink-0">
        <div class="container" >
            <div class="row">
                <div class="col-xs-12  bootstrap snippets bootdeys " >
                    <h1>Ver libro</h1>
                    <div class="widget panel"  style="border:1px solid grey;">
                        <div class="panel-body" >
                           
                            <section id="leftMessages">
                                <ul class="list-table" >
                                    <div class="box-img-hover" style="float:left">
                                        <img th:src="${searchBookById.portada}" src="https://i.pinimg.com/564x/f9/d8/99/f9d899d2d0f9676e89ba4ab83d85bd45.jpg" width="250" height="400"/>
                                    </div>
                                   
            
                                </ul>
                                <ul class="pt-5">
                                    <h4> Añadir a una lista de lectura </h4>
                                    <div class="d-flex flex-row">
                                        <div class="mr-lg-4">
                                            <div id="selectorLista">  
                                            

                                                
                                                <!-- el action cambia dinamicamente utilizando una función definida abajo en js-->
                                                <form class="form-inline input-group mt-3" id="listaLecturaForm" th:action="@{/save}" method="POST">
                                                    <input type="number" name="id" th:value="${searchBookById.id}" hidden/>                                              

                                                    <select class="form-select" name="tipoLibreria" id="selectorListaLectura" th:if="${libreriaLibro}!='sinLibreria'">
                                                        <th:block th:each="entry: ${ {sinLibreria:'Eliminar de libreria', leyendo:'Leyendo', pausados:'Pausados',
                                                        abandonados:'Abandonados', terminados:'terminados',quieroLeer:'Quiero Leer'}}">
                                                            <option th:value="${entry.key}" value="libreria" 
                                                                th:selected="${libreriaLibro}==${entry.key}">
                                                                <b th:text="${entry.value}">Libreria</b>
                                                            </option>
                                                        </th:block>
                                                    </select>

                                                    <select class="form-select" name="tipoLibreria" id="selectorListaLectura" th:if="${libreriaLibro}=='sinLibreria'">
                                                        <th:block th:each="entry: ${ {sinLibreria:'Sin libreria', leyendo:'Leyendo', pausados:'Pausados',
                                                        abandonados:'Abandonados', terminados:'terminados',quieroLeer:'Quiero Leer'}}">
                                                            <option th:value="${entry.key}" value="libreria" 
                                                                th:selected="${libreriaLibro}==${entry.key}">
                                                                <b th:text="${entry.value}">Libreria</b>
                                                            </option>
                                                        </th:block>
                                                    </select>

                                                    <button id="addToLib" class="btn btn-primary" type="submit">Aceptar</button>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                        
                                    <!--
                                    -->
                                    <!--</form>-->
                                </ul>
                            </a>
                            </section>
                            <section id="rightMessages" >
                                <h2 th:text="${searchBookById.titulo}" >Nombre del libro</h2>
                                <h4 th:text="${searchBookById.autor}" > Por Autor</h4>
                                <h5 th:text="${searchBookById.fecha}" > Fecha publicación</h5>
                                
                                <p th:text="${searchBookById.descripcion}" class="nm">Lorem ipsum dolor sit amet, consectetur elit, sed do eiusmod. Lorem ipsum dolor sit amet, consectetur elit, sed do eiusmod.</p>
                            
                                                          
                                <div class="products-box">
                                    <h5>Géneros</h5>
                                    <div class="container pt-1">
                                        
                                        <div class="row special-list">
                                            <div th:each="genero,count : ${#strings.arraySplit(searchBookById.generos, ',')}">
                                                <div class="products-single fix">
                                                    <button type="button" th:text="${#strings.arraySplit(genero,',')[0]}" class="btn btn-genre"> Género 1</button>
                                                </div>
                                            </div>          
                                        </div>
                                    </div>
                                </div>
                                   
                            
                            </section>
                            
                        </div>
                
                    
                </div>      
            </div>
        </div>

         <!-- Saga -->
  <!-- 
        <div class="products-box">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="title-all ">
                            <h1>Más de la Saga</h1>
                        </div>
                    </div>
                </div>
                
    
                <div class="row special-list">
                    <div class="col-lg-3 col-md-6 special-grid best-seller">
                        <div class="products-single fix">
                            <div class="box-img-hover">
                                <img src="https://i.pinimg.com/564x/f9/d8/99/f9d899d2d0f9676e89ba4ab83d85bd45.jpg" class="img-fluid" alt="Image">
                                <div class="mask-icon">
                                    <a class="cart" href="#">Add to Want to Read</a>
                                </div>
                            </div>
                            <div class="why-text">
                                <h3>Nombre del libro</h3>
                                <h5> Por Autor</h5>
                                <div class="product-rating mb-2">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star mr-0"></i>
                                </div>
                            </div>
                        </div>
                    </div>
    
                    <div class="col-lg-3 col-md-6 special-grid best-seller">
                        <div class="products-single fix">
                            <div class="box-img-hover">
                                <img src="https://i.pinimg.com/564x/1e/60/15/1e60154f5b08660131e3268873d7927c.jpg" class="img-fluid" alt="Image">
                                <div class="mask-icon">
                                    <a class="cart" href="#">Add to Want to Read</a>
                                </div>
                            </div>
                            <div class="why-text">
                                <h3>Nombre del libro</h3>
                                <h5> Por Autor</h5>
                                <div class="product-rating mb-2">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star mr-0"></i>
                                </div>
                            </div>
                        </div>
                    </div>
    
                    <div class="col-lg-3 col-md-6 special-grid best-seller">
                        <div class="products-single fix">
                            <div class="box-img-hover">
                                <img src="https://i.pinimg.com/736x/8e/b7/28/8eb728528c62707d083381a47c7cbf93.jpg" class="img-fluid" alt="Image">
                                <div class="mask-icon">
                                    <a class="cart" href="#">Add to Want to Read</a>
                                </div>
                            </div>
                            <div class="why-text">
                                <h3>Nombre del libro</h3>
                                <h5> Por Autor</h5>
                                <div class="product-rating mb-2">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star mr-0"></i>
                                </div>
                            </div>
                        </div>
                    </div>
    
                    <div class="col-lg-3 col-md-6 special-grid best-seller">
                        <div class="products-single fix">
                            <div class="box-img-hover">
                                <img src="https://i.pinimg.com/564x/1b/21/fc/1b21fc7abc856a93e3dbf65616714a2b.jpg" class="img-fluid" alt="Image">
                                <div class="mask-icon">
                                    <a class="cart" href="#">Add to Want to Read</a>
                                </div>
                            </div>
                            <div class="why-text">
                                <h3>Nombre del libro</h3>
                                <h5> Por Autor</h5>
                                <div class="product-rating mb-2">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star mr-0"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        -->
        
        <section id="products" style="float:left">
            <h1>Comentarios</h1>
           
               
                    <div class="row">
                        <th:block >
                            <div class="widget panel">
                               
                                <form  th:action="@{/user/review(id=${searchBookById.id})}" action="/user/review" method="POST" class="w-100 align-items-center">
                                    <label for="new-post" class="semibold nm pt-2">
                                        <div class="title-all pt-2">
                                            <h4>Qué te parece este libro?</h4>
                                        </div>
                                    </label>    
                                    
                                    <textarea id=busquedaNav class="md-textarea form-control shadow-sm w-100" type="search" placeholder="Queridos seguidores..."  name="query"></textarea>
                                    <button id="publish-post" class="btn btn-outline-success my-4 ml-auto" type="submit">Publicar
                                    </button>
                                </form>
                            </div>
                        </th:block>
                    </div>
                    <div class="row" th:each="r : ${reviews}">
                        <div class="col-xs-12 col-md-5 col-lg-4 bootstrap snippets bootdeys">
                            <div class="widget panel"  style="width:700px;">
                                <div class="panel-body" >
                                    <br>
                                    <ul class="list-table" >
                                        <li style="width:70px;">
                                            <img class="img-circle img-bordered-primary" th:src="@{/user/{id}/pic(id=${r.author.id})}" 
                                            src="" alt="" width="65px" height="65px">
                                           
                                        </li>
                                        <li class="text-left">
                                            <h5 class="semibold ellipsis nm usuario" th:text="${r.author.username}">Usuario 1</h5>
                                        </li>
                                        <!--
                                       <div th:if="${#lists.contains(likesPost, post.id)} "  style="float: right;" >
                                        <form class="text-right" style="width:70px;" th:action="@{/likes/__${post.id}__}" method="POST">
                                            <button id="buttonLike" class="btn btn-sm btn-danger like" type="submit">Dislike</button>
                                        </form>
                                       </div>
                    
                                        <div th:unless="${#lists.contains(likesPost, post.id)} "  style="float: right;">
                                            <form class="text-right" style="width:70px;" th:action="@{/likes/__${post.id}__}" method="POST">
                                                <button id="buttonLike" class="btn btn-sm btn-success like" type="submit">Like</button>
                                            </form>                    
                                        </div>   
                                        -->  
                                    </ul>
                                </div>
                                <br>
                                <ul class="list-group">
                                    <li class="list-group-item">
                                        <p class="nm" th:text="${r.text}">Lorem ipsum dolor sit amet, consectetur elit, sed do eiusmod.</p>
                                        <small class="text-muted fecha" th:text="${r.dateSent}">1 day ago</small>
                                        <!--
                                        <small style ="float: right" class="text-muted likes" th:text="${post.likes}">0 </small> <small style ="float: right" class="text-muted"> likes: </small>    
                                    -->
                                    </li>
                                </ul>
                        </div>
                    </div>
                
               
            </div>
        </section>
    </main>

    <th:block th:replace="fragments/footer.html :: footer" />

</body>
</html>